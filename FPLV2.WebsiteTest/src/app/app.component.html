<img *ngIf="loading" class="loading" src="assets/loading.gif"/>
<div *ngIf="!loading" class="settings">
  <div class="info" (click)="openInfoDialog()"></div>
  <div class="filter" (click)="openFilterDialog()"></div>
</div>
<ag-grid-angular *ngIf="!loading"
  class="ag-theme-alpine-dark"
  style="width: 100%; height: 100%"
  [suppressCellFocus]="true"
  [suppressRowHoverHighlight]="true"
  [suppressMovableColumns]="true"
  [rowData]="rows"
  [columnDefs]="columns"
  [getRowHeight]="getRowHeight">
</ag-grid-angular>

<dialog #infoDialog>
  <button class="close-button" (click)="closeInfoDialog()">×</button>
  <div class="dialog-header">Teams</div>
  <div class="players-container">
    <div class="player" *ngFor="let p of players" >
      <div class="players-dot" [style.backgroundColor]="playersColorCode[p.id]"></div>
      <div>{{p.teamName}}</div>
    </div>
  </div>
  <div class="dialog-header">Legend</div>
  <div class="legend-container">
    <div class="legend-entry">
      <div class="legend-dot"></div>
      <div>Player picked for this Gameweek</div>
    </div>
    <div class="legend-entry">
      <div class="legend-dot" style="opacity: 20%"></div>
      <div>Player on bench for this Gameweek</div>
    </div>
    <div class="legend-entry">
      <div class="legend-dot" style="border: 1.5px solid white"></div>
      <div>Captain for this Gameweek</div>
    </div>
    <div class="legend-entry">
      <div class="legend-dot" style="border: 2px solid white"></div>
      <div>Triple Captain</div>
    </div>    
  </div>
</dialog>

<dialog #filterDialog>
  <button class="close-button" (click)="closeFilterDialog(false)">×</button>
  <div class="dialog-header">Filter</div>
  <div class="filter-option">
    <input type="checkbox" [(ngModel)]="options.IgnoreElementsWithNoPicks">
    <div>Ignore players with no picks</div>
  </div>  
  <div class="filter-option">
    <input type="checkbox" [(ngModel)]="options.ShowCaptainsOnly">
    <div>Show captains only</div>
  </div>    
  <button (click)="closeFilterDialog(true)">Apply</button>
</dialog>